<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
   <title>Vaccine Passport Dapp</title>
   <script>
      function getAuthorityPart(){
         document.getElementById("AuthorityPart").style.display="block";
         document.getElementById("HospitalPart").style.display="none";
         document.getElementById("UserPart").style.display="none";
      }
      function getHospitalPart(){
         document.getElementById("AuthorityPart").style.display="none";
         document.getElementById("HospitalPart").style.display="block";
         document.getElementById("UserPart").style.display="none";
      }
      function getUserPart(){
         document.getElementById("AuthorityPart").style.display="none";
         document.getElementById("HospitalPart").style.display="none";
         document.getElementById("UserPart").style.display="block";
      }
   </script>
   <script>
      function getDeliverPassport(){
         document.getElementById("DeliverPassport").style.display="block";
         document.getElementById("ChangeTotalStatus").style.display="none";
         document.getElementById("GetList").style.display="none";
         document.getElementById("GrantHospital").style.display="none";
         document.getElementById("GrantAuthority").style.display="none";
         document.getElementById("LookUp").style.display="none";
         document.getElementById("Dispose").style.display="none";

      }
      function getChangeTotalStatus(){
         document.getElementById("DeliverPassport").style.display="none";
         document.getElementById("ChangeTotalStatus").style.display="block";
         document.getElementById("GetList").style.display="none";
         document.getElementById("GrantHospital").style.display="none";
         document.getElementById("GrantAuthority").style.display="none";
         document.getElementById("LookUp").style.display="none";
         document.getElementById("Dispose").style.display="none";

      }
      function getGetList(){
         document.getElementById("DeliverPassport").style.display="none";
         document.getElementById("ChangeTotalStatus").style.display="none";
         document.getElementById("GetList").style.display="block";
         document.getElementById("GrantHospital").style.display="none";
         document.getElementById("GrantAuthority").style.display="none";
         document.getElementById("LookUp").style.display="none";
         document.getElementById("Dispose").style.display="none";

      }
      function getGrantHospital(){
         document.getElementById("DeliverPassport").style.display="none";
         document.getElementById("ChangeTotalStatus").style.display="none";
         document.getElementById("GetList").style.display="none";
         document.getElementById("GrantHospital").style.display="block";
         document.getElementById("GrantAuthority").style.display="none";
         document.getElementById("LookUp").style.display="none";
         document.getElementById("Dispose").style.display="none";

      }
      function getGrantAuthority(){
         document.getElementById("DeliverPassport").style.display="none";
         document.getElementById("ChangeTotalStatus").style.display="none";
         document.getElementById("GetList").style.display="none";
         document.getElementById("GrantHospital").style.display="none";
         document.getElementById("GrantAuthority").style.display="block";
         document.getElementById("LookUp").style.display="none";
         document.getElementById("Dispose").style.display="none";

      }
      function getLookUp(){
         document.getElementById("DeliverPassport").style.display="none";
         document.getElementById("ChangeTotalStatus").style.display="none";
         document.getElementById("GetList").style.display="none";
         document.getElementById("GrantHospital").style.display="none";
         document.getElementById("GrantAuthority").style.display="none";
         document.getElementById("LookUp").style.display="block";
         document.getElementById("Dispose").style.display="none";

      }
      function getDispose(){
         document.getElementById("DeliverPassport").style.display="none";
         document.getElementById("ChangeTotalStatus").style.display="none";
         document.getElementById("GetList").style.display="none";
         document.getElementById("GrantHospital").style.display="none";
         document.getElementById("GrantAuthority").style.display="none";
         document.getElementById("LookUp").style.display="none";
         document.getElementById("Dispose").style.display="block";

      }
      

   </script>
   <script>
      function HosDeliverPassport(){
         document.getElementById("HosDeliverPassport").style.display="block";
         document.getElementById("HosLookUp").style.display="none";
         document.getElementById("SubmitInfo").style.display="none";

      }
      function HosLookUp(){
         document.getElementById("HosDeliverPassport").style.display="none";
         document.getElementById("HosLookUp").style.display="block";
         document.getElementById("SubmitInfo").style.display="none";

      }
      function SubmitInfo(){
         document.getElementById("HosDeliverPassport").style.display="none";
         document.getElementById("HosLookUp").style.display="none";
         document.getElementById("SubmitInfo").style.display="block";

      }
      
   </script>
   <script>
      function GetPassport(){
         document.getElementById("GetPassport").style.display="block";
         document.getElementById("UserGetList").style.display="none";
         document.getElementById("Specific").style.display="none";

      }
      function UserGetList(){
         document.getElementById("GetPassport").style.display="none";
         document.getElementById("UserGetList").style.display="block";
         document.getElementById("Specific").style.display="none";

      }
      function Specific(){
         document.getElementById("GetPassport").style.display="none";
         document.getElementById("UserGetList").style.display="none";
         document.getElementById("Specific").style.display="block";

      }
      
   </script>
	<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>

   <style>
      header {
          background-color:rgba(65, 18, 6, 0.767);
          color:white;
          text-align:center;
          padding:5px;	 
          font-style: italic;
      }
      nav {
          line-height:30px;
          background-color:rgba(65, 18, 6, 0.25);
          height:300px;
          width:150px;
          float:left;
          padding:20px;	      
      }
      section {
          width:350px;
          float:left;
          padding:10px;	 	 
      }
      footer {
          background-color:black;
          color:white;
          clear:both;
          text-align:center;
          padding:5px;	 	 
      }
   </style>
</head>

<header>
   <h1>Choose Your Identity</h1>
   <br />
   <button onclick="getAuthorityPart()">AuthorityPart</button>
   <button onclick="getHospitalPart()">HospitalPart</button>
   <button onclick="getUserPart()">UserPart</button>
</header>
<body>
   <div>
      <div id="AuthorityPart" style="display: none;">
          <h2>Here you are Authority</h2>
          <nav>       
              <a onclick="getDeliverPassport()">DeliverPassport</a>
              <a onclick="getChangeTotalStatus()">ChangeTotalStatus</a>
              <a onclick="getGetList()">GetList</a>
              <a onclick="getGrantHospital()">GrantHospital</a>
              <a onclick="getGrantAuthority()">GrantAuthority</a>
              <a onclick="getLookUp()">LookUp</a>
              <br/>
              <a onclick="getDispose()">Dispose</a>
             
          </nav>
          <section>
              <div id="DeliverPassport" style="display: none;">
                  DeliverPassport here. 
                  <br/>
                  <br/>
                  Enter the address of the user you need to send the passport:
                  <br/>
                  <input type="text">
                  <br/>
                  Enter the name of the receiver:
                  <br/>
                  <input type="text">
                  <button> Submit </button>
              </div>
              
              <div id="ChangeTotalStatus" style="display: none;">
                  ChangeTotalStatus here
                  <br/>
                  <br/>
                  Enter the address of the user:
                  <br/>
                  <input type="text">
                  <br/>
                  Enter the status you want to change to (0-2):
                  <br/>
                  <input type="text">
                  <button>Submit</button>
              </div>
            
              <div id="GetList" style="display: none;">
                  GetList here
                  <br/>
                  <br/>
                  <p>This is the place for the unchecked list</p>
                  <br/>
                  <button>Get</button>
              </div>
              <div id="GrantHospital" style="display: none;">
                  Grant Hospital here
                  <br/>
                  <br/>
                  Enter the address of the hospital to be granted:
                  <br/>
                  <input type="text">
                  <button>Submit</button>
              </div>
           
              <div id="GrantAuthority" style="display: none;">
                  Grant Authority here
                  <br/>
                  <br/>
                  Enter the address of the authority to be granted:
                  <br/>
                  <input type="text">
                  <button>Submit</button>
              </div>
         
              <div id="LookUp" style="display: none;">
                  Look Up user's passport
                  <br/>
                  <br/>
                  Enter the user's address:
                  <input type="text">
                  <button>Submit</button>
              </div>
              <div id="Dispose" style="display: none;">
                  Dispose unchecked vaccination
                  <br/>
                  <br/>
                  Enter the index of the vaccination waiting for dispose:
                  <br/>
                  <input type="text">
                  <br>
                  Enter the proposal here (0-3):
                  <br/>
                  <input type="text">
                  <button>Submit</button>
              </div>
      

          </section>
      </div>
      <div id="HospitalPart" style="display: none;">
          <h2>Here you are Hospital</h2>
          <nav>       
            <a onclick="HosDeliverPassport()">DeliverPassport</a>
            <a onclick="HosLookUp()">LookUp</a>
            <br/>
            <a onclick="SubmitInfo()">SubmitInfo</a>
           
          </nav>
          <section>
            <div id="HosDeliverPassport" style="display: none;">
                Hospital DeliverPassport here
                <br/>
                <br/>
                Enter the address of the user you need to send the passport:
                <br/>
                <input type="text">
                <br/>
                Enter the name of the receiver:
                <br/>
                <input type="text">
                <button> Submit </button>
            </div>
            
            <div id="HosLookUp" style="display: none;">
                Hospital look up here
                <br/>
                <br/>
                Enter the user's address:
                <input type="text">
                <button>Submit</button>
            </div>
          
            <div id="SubmitInfo" style="display: none;">
               Submit Information here
               <br/>
               <br/>
               Enter the authority's address:
               <br/>
               <input type="text">
               <br/>
               Enter the vaccine type:
               <br/>
               <input type="text">
               <br/>
               Enter the ID (address) of the user:
               <br/>
               <input type="text">
               <br/>
               Enter the date of vaccination:
               <br/>
               <input type="text">
               <button>Submit</button>
            </div>
            
          </section>
      </div>
      <div id="UserPart" style="display: none;">
          <h2>Here you are User</h2>
         <!--<button id="test" onclick="document.getElementById('testArea').innerHTML=passport.methods.testt().call({gas:30000000},function(error,result){})">try n=2</button>--> 
         <!--<p id="testArea">here</p>-->
         <nav>       
            <a onclick="GetPassport()">GetPassport</a>
            <br/>
            <a onclick="UserGetList()">GetList</a>
            <br/>
            <a onclick="Specific()">SpecificVaccine</a>
           
          </nav>
          <section>
            <div id="GetPassport" style="display: none;">
                Get your own vaccine passport here
                <br/>
                <br/>
                <p>This is the place for passport information</p>
                <br/>
                <button>Get</button>
            </div>
            
            <div id="UserGetList" style="display: none;">
                Get your vaccination list here
                <br/>
                <br/>
                <p>This is the place for your vaccination list</p>
                <br/>
                <button>Get</button>
            </div>
          
            <div id="Specific" style="display: none;">
               Search for your specific vaccination here
               <br/>
               <br/>
               <p>This is place for the specific vaccination by index</p>
               <br/>
               Enter the index of vaccination list:
               <br/>
               <input type="text">
               <button>Get</button>
            </div>
            
          </section>
      </div>
   </div>
   
   <div id="root"></div>

   <script src="./build.js"></script>
   <script type="text/javascript">
		console.log(web3);
      console.log("if use web3");
		var passportContract =  web3.eth.contract([
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address"
			},
			{
				"name": "totalStatus",
				"type": "uint8"
			}
		],
		"name": "AuthorityChangeToatalStatus",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "addr",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "totalStatus",
				"type": "uint8"
			}
		],
		"name": "AuthorityChangeToatalStatusEvent",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "i",
				"type": "uint256"
			},
			{
				"name": "proposal",
				"type": "uint8"
			}
		],
		"name": "AuthorityDisposeUncheckedInjection",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "i",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "proposal",
				"type": "uint8"
			}
		],
		"name": "AuthorityDisposeUncheckedInjectionEvent",
		"type": "event"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address"
			},
			{
				"name": "_name",
				"type": "string"
			}
		],
		"name": "deliverPassport",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "addr",
				"type": "address"
			}
		],
		"name": "grantHospitals",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "authorityAddr",
				"type": "address"
			},
			{
				"name": "kind",
				"type": "string"
			},
			{
				"name": "ID",
				"type": "address"
			},
			{
				"name": "date",
				"type": "string"
			}
		],
		"name": "HospitalSubmitInfomation",
		"outputs": [
			{
				"name": "success",
				"type": "bool"
			}
		],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "addr",
				"type": "address"
			}
		],
		"name": "LookUpEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "addr",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "name",
				"type": "string"
			}
		],
		"name": "deliverPassportEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "addr",
				"type": "address"
			}
		],
		"name": "grantHospitalEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "auth",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "kind",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "ID",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "date",
				"type": "string"
			}
		],
		"name": "HospitalSubmitInfomationEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "AuthorityGetUncheckedInjectionListEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "VaccinatedOneGetHisPassportEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "VaccinatedOneGetListEvent",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "i",
				"type": "uint256"
			}
		],
		"name": "showSpecificInjectionEvent",
		"type": "event"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "AuthorityGetUncheckedInjectionList",
		"outputs": [
			{
				"name": "flist",
				"type": "uint256[]"
			},
			{
				"name": "cnt",
				"type": "uint256"
			},
			{
				"name": "totalCnt",
				"type": "uint256"
			},
			{
				"name": "herenumbersinWaitingList",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "addr",
				"type": "address"
			}
		],
		"name": "LookUp",
		"outputs": [
			{
				"name": "ID",
				"type": "address"
			},
			{
				"name": "name",
				"type": "string"
			},
			{
				"name": "injectedIndex",
				"type": "uint256"
			},
			{
				"name": "totalStatus",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "i",
				"type": "uint256"
			}
		],
		"name": "showSpecificInjection",
		"outputs": [
			{
				"name": "_InjectionID",
				"type": "uint256"
			},
			{
				"name": "_kind",
				"type": "string"
			},
			{
				"name": "_ID",
				"type": "address"
			},
			{
				"name": "_date",
				"type": "string"
			},
			{
				"name": "_injectedIndex",
				"type": "uint256"
			},
			{
				"name": "_InjectionStatus",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "testt",
		"outputs": [
			{
				"name": "n",
				"type": "uint256"
			},
			{
				"name": "id",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "VaccinatedOneGetHisPassport",
		"outputs": [
			{
				"name": "_ID",
				"type": "address"
			},
			{
				"name": "_name",
				"type": "string"
			},
			{
				"name": "_totalStatus",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "VaccinatedOneGetList",
		"outputs": [
			{
				"name": "list",
				"type": "uint256[]"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
]);
		var passport = passportContract.at('0x49a081DAF2ee92c6F16E7052745ec25BeEE6a2c1');
      console.log(passport);
      document.getElementById('testArea').innerHTML=passport.methods.testt().call().then(console.log);
   </script>
   <script>
      window.addEventListener('load', async () => {
          // Modern dapp browsers...
          if (window.ethereum) {
              window.web3 = new Web3(ethereum);
              try {
                  // Request account access if needed
                  await ethereum.enable();
                  // Acccounts now exposed
              } catch (error) {
                  // User denied account access...
              }
          }
          // Legacy dapp browsers...
          else if (window.web3) {
              window.web3 = new Web3(web3.currentProvider);
          }
          // Non-dapp browsers...
          else {
              console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');
          }
      })
   </script>

</body>
</html>
